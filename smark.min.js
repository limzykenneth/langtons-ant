var smark={youtubeRE:/^(?:https?:\/\/)?(?:www\.)?youtu(?:\.be|be\.com)\/(?:watch|embed\/watch|embed)?[\?\/]?(?:v=|feature=player_embedded&v=)?(\w+)$/,vimeoRE:/^(?:https?:\/\/)?(?:www\.)?vimeo\.com\/(?:channels\/)?(?:\w+\/)?(\d+)$/,imageRE:/^(?! ).+\.(jpg|jpeg|gif|png|bmp)$/,htmlRE:/^((?!.*(jpg|jpeg|gif|png|bmp))(https?:\/\/)[\w\-_]+(\.[\w\-_]+)+[\w\-.,@?^=%&:\/~\\+#]*)|.+\.(?!jpg|jpeg|gif|png|bmp)html?$/,linkRE:/\[(.*?)\](?: |-blank )\((.+?)\)/g,linkBlankRE:/\[(.*?)\]-blank \((.+?)\)/g,olRE:/(?:\d\.\s(.+?) \| ?)+/g,olliRE:/\d\.\s(.+?) \|/g,ulRE:/(?:\*\s(.+?) \| ?)+/g,ulliRE:/\*\s(.+?) \|/g,h6RE:/#{6} (.+?) #{6}/g,h5RE:/#{5} (.+?) #{5}/g,h4RE:/#{4} (.+?) #{4}/g,h3RE:/#{3} (.+?) #{3}/g,h2RE:/#{2} (.+?) #{2}/g,h1RE:/# (.+?) #/g,hrRE:/\s---\s/g,bqRE:/```(.+?)(?:\[-source:(.+)\])?```/g,dQuotRE:/([[\n \.,;:])\\?"(.+?)\\?"([\n \.,;:\b\]])/g,sQuotRE:/([[\n \.,;:])\\?'(.+?)\\?'([\n \.,;:\b\]])/g,volRE:/\bvol\.\s\b/gi,pRE:/\bp\.\s\b(?=\d+)/g,cRE:/\bc\.\s\b(?=\d+)/g,flRE:/\bfl\.\s\b(?=\d+)/g,ieRE:/\bi\.e\.\s\b/g,egRE:/\be\.g\.\s\b/g,aposRE:/([A-Za-z]+)'([a-z]+)/g,endashRE:/(\d+)-(\d+)/g,elipseRE:/\.{3}/g};smark.generate=function(e,a){var l=e;var t=true;var i="";var h="";if(a!=undefined){for(var r=0;r<a.length;r++){if(a[r]==noTypo)t=false}}if(this.youtubeRE.test(e)){l=e.replace(this.youtubeRE,"$1");i='<iframe class="smark youtube" src="https://www.youtube.com/embed/'+l+'" frameborder="0" width="853" height="480" allowfullscreen></iframe>';h="youtube"}else if(this.vimeoRE.test(e)){l=e.replace(this.vimeoRE,"$1");i='<iframe class="smark vimeo" src="https://player.vimeo.com/video/'+l+'" frameborder="0" width="853" height="480" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>';h="vimeo"}else if(this.imageRE.test(e)){l=e.match(this.imageRE)[0];i='<img class="smark image" src="'+l+'" width="853" height="480">';h="image"}else if(this.htmlRE.test(e)){l=e.match(this.htmlRE)[0];i='<iframe class="smark website" src="'+l+'" width="853" height="480" frameborder="0"></iframe>';h="website"}else{l=this.parseParagraph(t,l);i='<p class="smark paragraph">'+l+"</p>";h="paragraph"}return{html:i,type:h}};smark.typographicChanges=function(e,a){a=a.replace(this.dQuotRE,"$1“$2”$3");a=a.replace(this.sQuotRE,"$1‘$2’$3");a=a.replace(this.volRE,"Vol.");a=a.replace(this.pRE,"p.");a=a.replace(this.cRE,"<i>c.</i>");a=a.replace(this.flRE,"<i>fl.</fl>");a=a.replace(this.ieRE,"<i>ie</i> ");a=a.replace(this.egRE,"<i>eg</i> ");a=a.replace(this.aposRE,"$1’$2");a=a.replace(this.endashRE,"$1–$2");a=a.replace(this.elipseRE,"…");return a};smark.parseParagraph=function(e,a){a=this.typographicChanges(e,a);var l="";if(a.replace(this.linkRE,"$1")===""){l='<a href="$2">$2</a>';if(this.linkBlankRE.test(a)){l='<a target=_blank href="$2">$2</a>'}}else{l='<a href="$2">$1</a>';if(this.linkBlankRE.test(a)){l='<a target=_blank href="$2">$1</a>'}}a=a.replace(this.linkRE,l);var t=a.match(this.olRE);if(t!=null){for(var i=0;i<t.length;i++){var h=t[i].match(this.olliRE);l="<ol>";for(var r=0;r<h.length;r++){l+="<li>"+h[r].replace(this.olliRE,"$1")+"</li>";console.log(l)}l+="</ol>";a=a.replace(t[i],l)}}var s=a.match(this.ulRE);if(s!=null){for(var i=0;i<s.length;i++){var h=s[i].match(this.ulliRE);l="<ul>";for(var r=0;r<h.length;r++){l+="<li>"+h[r].replace(this.ulliRE,"$1")+"</li>"}l+="</ul>";a=a.replace(s[i],l)}}if(a.replace(this.bqRE,"$2")==""){a=a.replace(this.bqRE,"<blockquote><p>$1</p></blockquote>")}else{a=a.replace(this.bqRE,"<blockquote><p>$1</p><footer>$2</footer></blockquote>")}a=a.replace(this.h6RE,"<h6>$1</h6>");a=a.replace(this.h5RE,"<h5>$1</h5>");a=a.replace(this.h4RE,"<h4>$1</h4>");a=a.replace(this.h3RE,"<h3>$1</h3>");a=a.replace(this.h2RE,"<h2>$1</h2>");a=a.replace(this.h1RE,"<h1>$1</h1>");a=a.replace(this.hrRE,"<hr />");return a};
